<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Копирование объектов и массивов</title>
</head>

<body>
	<script type="text/javascript">
		// ## Строки, цифры, boolean
		// Начнем со строк, цифр и значений true/false
		let name = 'vasily';
		let nameTwo = name; // vasily
		name = 'stas'; // stas


		// У нас есть массив
		const students = ['Сергей', 'Станислав', 'Мария', 'Павел'];

		// ## Массивы
		// Мы хотим создать копию массива.
		const group = students;

		// Давайте внесем изменение в новый массив
		group[2] = 'Александра'; // в 2-х массивах меняется значение 

		// Посмотрим, что у нас получилось


		// У нас проблема! Исходный массив students был также изменен

		// Причина заключается в том, что создавая таким образом массив group - 
		// мы создали ссылку на объект а не копию объекта! 
		// Оба объекта ссылаются на один и тот же массив.

		// И что же делать? Вместо этого давайте создадим копию массива!

		// ** Вариант 1 (метод slice)

		const group2 = students.slice(0, 2);
		console.log(students);
		console.log(group2);

		// ** Вариант 2 (метод concat)
		const group3 = [].concat(students); // копирование исходного массива

		// ** Вариант 3 (оператор spread)
		const group4 = [...students];

		// ** Вариант 4 (метод Array.from())
		const group5 = Array.from(students);

		// Таким образом мы создаем копию и не меняем исходный массив!

		// ## Объекты

		// > Тоже самое относится к объектам
		const person = {
			name: 'Peter',
			age: 30
		}


		// попробуем сделать копию объекта
		const student = person;
		student.age = 100; // копия не создается, меняется значение везде

		// Как создать копию объекта? 
		
		// Вариант 1 (метод Object.assign())
		const fireman = Object.assign({}, person, {age: 38, height: '1.8m'});

		// Вариант 2 (используем оператор spread)
		const worker = {...person};


		// Важно! Все способы копирования массивов и объектов подразумевают верхнеуровневое 
		// копирование - не копируют вложенные объекты! Для копирования объектов с  
		// несколькими уровнями вложенности можно использовать метод cloneDeep библиотеки lodash.

		const max = {
			name: 'Max',
			age: 20,
			social: {
				twitter: '@max',
				facebook: 'maxim'
			}
		}

    //const max2 = Object.assign({}, max, {name: 'Max2', age: 100});
    //max2.social.facebook = 'max2222222222'
	</script>
</body>

</html>